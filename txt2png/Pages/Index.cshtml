@page
@model txt2png.Pages.IndexModel
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Txt2Png Test Harness</title>
    <script src="//code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script>
        $(function() {
            $.ajaxSetup({
                beforeSend: function(req) {
                    req.setRequestHeader("Accept", "text/plain");
                }
            });
            $('#result').hide();

            function sendRequest() {
                if ($.trim($('#Input').val()) == '') {
                    alert('Input is blank.');
                    return;
                }
                var url = '/txt2png?input=' + $('#Input').val() + '&background=' + $('#Background:checked').val();
                $.get(url,
                    function(data) {
                        $('#image').attr('src', 'data:image/png;base64,' + data);
                        $('#imgTag').html('&lt;img src=&quot;data:image/png;base64,' + data + '&quot; alt=&quot;Image generated by github.com/3dbrows/txt2png&quot; /&gt;');
                        $('#markdownTag').html('![Image generated by github.com/3dbrows/txt2png](data:image/png;base64,' + data + ')');
                        $('#b64').html(data);
                        $('#result').show();
                    },
                    'text');
            };

            $('#btn').on('click', sendRequest);
            $('#Input').keypress(function(e) {
                if (e.which == 13) {
                    sendRequest();
                    return false;
                }
            });
        });
    </script>
    <style type="text/css">
        body { background-color: #E6E6FA; }

        h1, h4, label {
            font-family: sans-serif;
            margin-top: 1em;
        }

        input { margin-bottom: 0.5em; }
    </style>
</head>
<body>
    <h1><a href="https://github.com/3dbrows/txt2png">Txt2Png</a> Test Harness</h1>
    <h4>Enter some text to convert to a PNG image:</h4>
    @Html.TextBox("Input", null, new {size = 50, maxlength = ViewData["MaxLength"]})
    <button id="btn">Go</button>
    <div>
        @Html.RadioButton("Background", "Transparent", true)
        @Html.Label("TransparentBackground", "Transparent background")
        @Html.RadioButton("Background", "White", false)
        @Html.Label("WhiteBackground", "White background")
    </div>
    <div id="result">
        <h4>The image is:</h4>
        <img id="image" alt="txt2png-generated image" src=""/>
        <h4>The HTML <code>img</code> tag is:</h4>
        <pre id="imgTag"></pre>
        <h4>The Markdown tag is:</h4>
        <pre id="markdownTag"></pre>
        <h4>The Base64 encoding of your image is:</h4>
        <pre id="b64"></pre>
    </div>
    <hr/>
    <h4>For more information about this tool, please <a href="https://github.com/3dbrows/txt2png">refer to its GitHub repository</a>.</h4>
</body>
</html>